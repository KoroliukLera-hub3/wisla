<script>
  import Lenis from 'lenis';

  const initLenis = () => {
    // Ждем, пока браузер выполнит все критические задачи
    requestAnimationFrame(() => {
      const lenis = new Lenis({
        duration: 1.2,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        smoothWheel: true,
        touchMultiplier: 1.5,
      });

      function raf(time: number) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }
      requestAnimationFrame(raf);

      // Глобальный доступ для управления из других скриптов
      window.lenis = lenis;
    });
  };

  // Инициализируем только при полной загрузке страницы
  if (document.readyState === 'complete') {
    initLenis();
  } else {
    window.addEventListener('load', initLenis);
  }
</script>